
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.5">
    
    
      
        <title>Atrium allocation - The Green Valley</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.21aed14c.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.196e0c26.min.css">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7C&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../css/ansi-colours.css">
    
      <link rel="stylesheet" href="../../../css/jupyter-cells.css">
    
      <link rel="stylesheet" href="../../../css/pandas-dataframe.css">
    
    
      
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="orange">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#atrium-allocation-and-green-path-finding" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="The Green Valley" class="md-header-nav__button md-logo" aria-label="The Green Valley">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            The Green Valley
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Atrium allocation
            
          </span>
        </div>
      
    </div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="The Green Valley" class="md-nav__button md-logo" aria-label="The Green Valley">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    The Green Valley
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2" >
    <label class="md-nav__link" for="nav-2">
      A1_Planning
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="A1_Planning" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon"></span>
        A1_Planning
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A1_Planning/Process/" class="md-nav__link">
      Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A1_Planning/Products/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3" >
    <label class="md-nav__link" for="nav-3">
      A2_Configuring
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="A2_Configuring" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon"></span>
        A2_Configuring
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A2_Configuring/Process/" class="md-nav__link">
      Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A2_Configuring/Products/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    <label class="md-nav__link" for="nav-4">
      A3_Massing
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="A3_Massing" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        A3_Massing
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-1" type="checkbox" id="nav-4-1" >
    <label class="md-nav__link" for="nav-4-1">
      Process
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Process" data-md-level="2">
      <label class="md-nav__title" for="nav-4-1">
        <span class="md-nav__icon md-icon"></span>
        Process
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Atrium%20allocation/Atrium%20allocation/" class="md-nav__link">
      Atrium Allocation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Shadow%20casting%20analysis/Shadow%20analysis/" class="md-nav__link">
      Shadow casting analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Visibility%20analysis/Visibility%20analysis/" class="md-nav__link">
      Visibility analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Sun%20access%20analysis/Sun%20analysis/" class="md-nav__link">
      Sun access analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Public%20entrance%20analysis/Public%20entrance%20analysis/" class="md-nav__link">
      Public entrance analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Green%20acces%20analysis/Green%20acces%20analysis/" class="md-nav__link">
      Green acces analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Process/Noise%20Analysis/Noise%20analysis/" class="md-nav__link">
      Noise analysis
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-2" type="checkbox" id="nav-4-2" >
    <label class="md-nav__link" for="nav-4-2">
      Product
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Product" data-md-level="2">
      <label class="md-nav__title" for="nav-4-2">
        <span class="md-nav__icon md-icon"></span>
        Product
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Products/Seed%20allocation/Seed%20allocation/" class="md-nav__link">
      Seed allocation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Products/Shortest%20paths/Shortest%20paths/" class="md-nav__link">
      Shortest paths
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A3_Massing/Products/Agent%20growth/Agent%20growth/" class="md-nav__link">
      Agent growth
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" >
    <label class="md-nav__link" for="nav-5">
      A4_Forming
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="A4_Forming" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        A4_Forming
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A4_Forming/Process/" class="md-nav__link">
      Process
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../A4_Forming/Products/" class="md-nav__link">
      Product
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../A5_Result/" class="md-nav__link">
      A5_Result
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../about/" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    <label class="md-nav__link" for="nav-8">
      index
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="index" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        <span class="md-nav__icon md-icon"></span>
        index
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="nav-8-1" type="checkbox" id="nav-8-1" checked>
    <label class="md-nav__link" for="nav-8-1">
      scripts
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="scripts" data-md-level="2">
      <label class="md-nav__title" for="nav-8-1">
        <span class="md-nav__icon md-icon"></span>
        scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../Voxelize/" class="md-nav__link">
      Voxelization
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Atrium allocation
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Atrium allocation
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0-initialization" class="md-nav__link">
    0. Initialization
  </a>
  
    <nav class="md-nav" aria-label="0. Initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01-load-required-libraries" class="md-nav__link">
    0.1. Load required libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02-define-the-neighborhood-stencil" class="md-nav__link">
    0.2. Define the Neighborhood (Stencil)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03-load-the-envelope-lattice-as-the-avialbility-lattice" class="md-nav__link">
    0.3. Load the envelope lattice as the avialbility lattice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04-load-agents-information" class="md-nav__link">
    0.4. Load Agents Information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-creation-of-vertical-shaft" class="md-nav__link">
    1. Creation of Vertical Shaft
  </a>
  
    <nav class="md-nav" aria-label="1. Creation of Vertical Shaft">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-agent-initialization" class="md-nav__link">
    1.1. Agent initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-set-the-atrium-agent-as-vertical-shaft" class="md-nav__link">
    1.4. Set the atrium agent as vertical shaft
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-creation-of-horizontal-corridors" class="md-nav__link">
    2. Creation of Horizontal Corridors
  </a>
  
    <nav class="md-nav" aria-label="2. Creation of Horizontal Corridors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-extract-the-connectivity-graph-from-the-lattice-based-on-the-horizontal-stencil" class="md-nav__link">
    2.1. Extract the connectivity graph from the lattice based on the horizontal stencil
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-find-the-shortest-path-and-construct-the-corridor" class="md-nav__link">
    2.2. Find the shortest path and construct the corridor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3editing-voxels" class="md-nav__link">
    3.Editing Voxels
  </a>
  
    <nav class="md-nav" aria-label="3.Editing Voxels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-corridor" class="md-nav__link">
    3.1 Corridor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-shaft" class="md-nav__link">
    3.2 Shaft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-visualize-the-corridor-lattice" class="md-nav__link">
    3.3. Visualize the corridor lattice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-saving" class="md-nav__link">
    4. Saving
  </a>
  
    <nav class="md-nav" aria-label="4. Saving">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#credits" class="md-nav__link">
    Credits
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../shadow/" class="md-nav__link">
      Shadow casting analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../visibility/" class="md-nav__link">
      Visibility analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../sun/" class="md-nav__link">
      Sun access analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../entrance_access/" class="md-nav__link">
      Public entrance analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../Green/" class="md-nav__link">
      Green access analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../noise%20field/" class="md-nav__link">
      Noise analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../corridors/" class="md-nav__link">
      Shafts and shortest paths
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../abm/" class="md-nav__link">
      Agent based model
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../.." class="md-nav__link">
      Polygonization
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../presentations/" class="md-nav__link">
      Presentations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../film/" class="md-nav__link">
      Film
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../bibliography/" class="md-nav__link">
      Bibliography
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../figures/" class="md-nav__link">
      Figures
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#0-initialization" class="md-nav__link">
    0. Initialization
  </a>
  
    <nav class="md-nav" aria-label="0. Initialization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#01-load-required-libraries" class="md-nav__link">
    0.1. Load required libraries
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#02-define-the-neighborhood-stencil" class="md-nav__link">
    0.2. Define the Neighborhood (Stencil)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#03-load-the-envelope-lattice-as-the-avialbility-lattice" class="md-nav__link">
    0.3. Load the envelope lattice as the avialbility lattice
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#04-load-agents-information" class="md-nav__link">
    0.4. Load Agents Information
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-creation-of-vertical-shaft" class="md-nav__link">
    1. Creation of Vertical Shaft
  </a>
  
    <nav class="md-nav" aria-label="1. Creation of Vertical Shaft">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-agent-initialization" class="md-nav__link">
    1.1. Agent initialization
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14-set-the-atrium-agent-as-vertical-shaft" class="md-nav__link">
    1.4. Set the atrium agent as vertical shaft
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-creation-of-horizontal-corridors" class="md-nav__link">
    2. Creation of Horizontal Corridors
  </a>
  
    <nav class="md-nav" aria-label="2. Creation of Horizontal Corridors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-extract-the-connectivity-graph-from-the-lattice-based-on-the-horizontal-stencil" class="md-nav__link">
    2.1. Extract the connectivity graph from the lattice based on the horizontal stencil
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-find-the-shortest-path-and-construct-the-corridor" class="md-nav__link">
    2.2. Find the shortest path and construct the corridor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3editing-voxels" class="md-nav__link">
    3.Editing Voxels
  </a>
  
    <nav class="md-nav" aria-label="3.Editing Voxels">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-corridor" class="md-nav__link">
    3.1 Corridor
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-shaft" class="md-nav__link">
    3.2 Shaft
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-visualize-the-corridor-lattice" class="md-nav__link">
    3.3. Visualize the corridor lattice
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-saving" class="md-nav__link">
    4. Saving
  </a>
  
    <nav class="md-nav" aria-label="4. Saving">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#credits" class="md-nav__link">
    Credits
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.10/require.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script>
(function() {
  function addWidgetsRenderer() {
    var mimeElement = document.querySelector('script[type="application/vnd.jupyter.widget-view+json"]');
    var scriptElement = document.createElement('script');
    var widgetRendererSrc = 'https://unpkg.com/@jupyter-widgets/html-manager@*/dist/embed-amd.js';
    var widgetState;

    // Fallback for older version:
    try {
      widgetState = mimeElement && JSON.parse(mimeElement.innerHTML);

      if (widgetState && (widgetState.version_major < 2 || !widgetState.version_major)) {
        widgetRendererSrc = 'jupyter-js-widgets@*/dist/embed.js';
      }
    } catch(e) {}

    scriptElement.src = widgetRendererSrc;
    document.body.appendChild(scriptElement);
  }

  document.addEventListener('DOMContentLoaded', addWidgetsRenderer);
}());
</script>

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="atrium-allocation-and-green-path-finding">Atrium allocation and green path finding</h1>
<p><a href="/spatial_computing_project_template/A3_Massing/Process/Atrium%20allocation/Atrium%20allocation/">More about atrium allocation and green path finding</a></p>
<p>In this notebook, we will first try to allocate the center of the building which will eventually represent the atrium of the building. Secondly we want to compute the shortest path from the three public green spaces in the nearby neighborhood of the plot. We will this with the astar algorithm. Finally we will edt the voxelized envelope with the help of the atrium and the green path by broadening both, and set every voxel above the path as unavailable. </p>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="0-initialization">0. Initialization</h2>
<h3 id="01-load-required-libraries">0.1. Load required libraries</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">topogenesis</span> <span class="k">as</span> <span class="nn">tg</span>
<span class="kn">import</span> <span class="nn">pyvista</span> <span class="k">as</span> <span class="nn">pv</span>
<span class="kn">import</span> <span class="nn">trimesh</span> <span class="k">as</span> <span class="nn">tm</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">networkx</span> <span class="k">as</span> <span class="nn">nx</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.cluster</span> <span class="kn">import</span> <span class="n">KMeans</span>
<span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># extra import function</span>
<span class="k">def</span> <span class="nf">lattice_from_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
    <span class="c1"># read metadata</span>
    <span class="n">meta_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">nrows</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">shape</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">meta_df</span><span class="p">[</span><span class="s1">&#39;shape&#39;</span><span class="p">])</span>
    <span class="n">unit</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">meta_df</span><span class="p">[</span><span class="s1">&#39;unit&#39;</span><span class="p">])</span>
    <span class="n">minbound</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">meta_df</span><span class="p">[</span><span class="s1">&#39;minbound&#39;</span><span class="p">])</span>

    <span class="c1"># read lattice</span>
    <span class="n">lattice_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">skiprows</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

    <span class="c1"># create the buffer</span>
    <span class="n">buffer</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">lattice_df</span><span class="p">[</span><span class="s1">&#39;value&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">shape</span><span class="p">)</span>

    <span class="c1"># create the lattice</span>
    <span class="n">l</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">to_lattice</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">minbound</span><span class="o">=</span><span class="n">minbound</span><span class="p">,</span> <span class="n">unit</span><span class="o">=</span><span class="n">unit</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">l</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="02-define-the-neighborhood-stencil">0.2. Define the Neighborhood (Stencil)</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># creating neighborhood definition - center with 0 neighbours</span>
<span class="n">stencil</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">create_stencil</span><span class="p">(</span><span class="s2">&quot;moore&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># setting the center to zero</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">stencil</span><span class="o">.</span><span class="n">set_index</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="mi">1</span><span class="p">)</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="03-load-the-envelope-lattice-as-the-avialbility-lattice">0.3. Load the envelope lattice as the avialbility lattice</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># loading the lattice from csv</span>
<span class="n">lattice_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="s1">&#39;../data/envelope_highres_new.csv&#39;</span><span class="p">)</span>
<span class="n">avail_lattice</span> <span class="o">=</span> <span class="n">lattice_from_csv</span><span class="p">(</span><span class="n">lattice_path</span><span class="p">)</span>
<span class="n">init_avail_lattice</span> <span class="o">=</span> <span class="n">tg</span><span class="o">.</span><span class="n">to_lattice</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">avail_lattice</span><span class="p">),</span> <span class="n">avail_lattice</span><span class="p">)</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="04-load-agents-information">0.4. Load Agents Information</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># loading program (agents information) from CSV</span>
<span class="n">prgm_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="s1">&#39;../data/program_atrium.csv&#39;</span><span class="p">)</span>
<span class="n">agn_info</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">genfromtxt</span><span class="p">(</span><span class="n">prgm_path</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">)[</span><span class="mi">1</span><span class="p">:,</span> <span class="mi">1</span><span class="p">:]</span>
<span class="c1"># extract agent ids</span>
<span class="n">agn_ids</span> <span class="o">=</span> <span class="n">agn_info</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span>
<span class="c1"># extract agent preferences</span>
<span class="n">agn_prefs</span> <span class="o">=</span> <span class="n">agn_info</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">:]</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1-creation-of-vertical-shaft">1. Creation of Vertical Shaft</h2>
<h3 id="11-agent-initialization">1.1. Agent initialization</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># initialize the occupation lattice</span>
<span class="n">occ_lattice</span> <span class="o">=</span> <span class="n">avail_lattice</span> <span class="o">*</span> <span class="mi">0</span> <span class="o">-</span> <span class="mi">1</span>

<span class="c1"># Finding the index of the available voxels in avail_lattice</span>
<span class="n">avail_flat</span> <span class="o">=</span> <span class="n">avail_lattice</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">avail_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">avail_lattice</span> <span class="o">==</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># count the number of spaces (rows) and intiialize an agent for each space</span>
<span class="n">agn_num</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">agn_info</span><span class="p">)</span>

<span class="c1"># adding the origins to the agents locations</span>
<span class="n">agn_locs</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">agn_manual_input</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">0</span><span class="p">:</span> <span class="p">[[</span><span class="mi">20</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">]],</span>
    <span class="mi">1</span><span class="p">:</span> <span class="p">[[</span><span class="mi">32</span><span class="p">,</span><span class="mi">19</span><span class="p">,</span><span class="mi">1</span><span class="p">]],</span>
    <span class="mi">2</span><span class="p">:</span> <span class="p">[[</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]],</span>
    <span class="mi">3</span><span class="p">:</span> <span class="p">[[</span><span class="mi">39</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]],</span>
<span class="p">}</span>

<span class="c1"># retrieving the entrance access value of the free neighbours</span>
<span class="k">for</span> <span class="n">a_id</span> <span class="ow">in</span> <span class="n">agn_ids</span><span class="p">:</span>    
    <span class="n">voxel_vals</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">pot_voxels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="c1"># retrieve agent preferences</span>
    <span class="n">a_pref</span> <span class="o">=</span> <span class="n">agn_prefs</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">a_id</span><span class="p">)]</span>

    <span class="k">if</span> <span class="n">a_id</span> <span class="ow">in</span> <span class="n">agn_manual_input</span><span class="p">:</span>

        <span class="c1"># add the newly selected neighbour location to agent locations</span>
        <span class="n">agn_locs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">agn_manual_input</span><span class="p">[</span><span class="n">a_id</span><span class="p">])</span>

        <span class="k">for</span> <span class="n">loc</span> <span class="ow">in</span> <span class="n">agn_manual_input</span><span class="p">[</span><span class="n">a_id</span><span class="p">]:</span>
            <span class="c1"># set the newly selected neighbour as UNavailable (0) in the availability lattice</span>
            <span class="n">avail_lattice</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">loc</span><span class="p">)]</span> <span class="o">=</span> <span class="mi">0</span>
            <span class="c1"># set the newly selected neighbour as OCCUPIED by current agent </span>
            <span class="c1"># (-1 means not-occupied so a_id)</span>
            <span class="n">occ_lattice</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">loc</span><span class="p">)]</span> <span class="o">=</span> <span class="n">a_id</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Voxel Evaluation Loop</span>
        <span class="k">for</span> <span class="n">pot_vox</span> <span class="ow">in</span> <span class="n">avail_index</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">avail_lattice</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pot_vox</span><span class="p">)]:</span>

                <span class="n">global_vox_value</span> <span class="o">=</span> <span class="mf">1.0</span>
                <span class="c1"># for every lattice in the environment informations</span>
                <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">info_lattice</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">env_info</span><span class="p">):</span>
                    <span class="n">vox_val</span> <span class="o">=</span> <span class="n">info_lattice</span><span class="p">[</span><span class="nb">tuple</span><span class="p">(</span><span class="n">pot_vox</span><span class="p">)]</span>
                    <span class="n">agn_vox_val</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">power</span><span class="p">(</span><span class="n">vox_val</span><span class="p">,</span> <span class="n">a_pref</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                    <span class="n">global_vox_value</span> <span class="o">*=</span> <span class="n">agn_vox_val</span>
                <span class="c1"># add the neighbour value to the list of values</span>
                <span class="n">voxel_vals</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">global_vox_value</span><span class="p">)</span>
                <span class="n">pot_voxels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pot_vox</span><span class="p">)</span>

        <span class="c1"># convert to numpy array</span>
        <span class="n">voxel_vals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">voxel_vals</span><span class="p">)</span>
        <span class="c1"># convert to numpy array</span>
        <span class="n">pot_voxels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">pot_voxels</span><span class="p">)</span>
        <span class="c1"># select the neighbour with highest value </span>
        <span class="n">selected_int</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">voxel_vals</span><span class="p">)</span> 
        <span class="c1"># find 3D intiger index of selected neighbour</span>
        <span class="n">selected_neigh_3d_id</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">pot_voxels</span><span class="p">[</span><span class="n">selected_int</span><span class="p">]</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
        <span class="c1"># find the location of the newly selected neighbour</span>
        <span class="n">selected_neigh_loc</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">selected_neigh_3d_id</span><span class="p">)</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>

        <span class="c1"># add the newly selected neighbour location to agent locations</span>
        <span class="n">agn_locs</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">selected_neigh_loc</span><span class="p">])</span>
        <span class="c1"># set the newly selected neighbour as UNavailable (0) in the availability lattice</span>
        <span class="n">avail_lattice</span><span class="p">[</span><span class="n">selected_neigh_3d_id</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="c1"># set the newly selected neighbour as OCCUPIED by current agent </span>
        <span class="c1"># (-1 means not-occupied so a_id)</span>
        <span class="n">occ_lattice</span><span class="p">[</span><span class="n">selected_neigh_3d_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">a_id</span>
<span class="c1"># extract the address of all occupied voxels</span>
<span class="n">occ_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">occ_lattice</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="14-set-the-atrium-agent-as-vertical-shaft">1.4. Set the atrium agent as vertical shaft</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># find the shaft location</span>
<span class="n">shaft_loc</span> <span class="o">=</span> <span class="n">agn_locs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="c1"># init shaft lattice</span>
<span class="n">shft_lattice</span> <span class="o">=</span> <span class="n">occ_lattice</span> <span class="o">*</span> <span class="mi">0</span>
<span class="c1"># set the shafts</span>
<span class="k">for</span> <span class="n">sh_loc</span> <span class="ow">in</span> <span class="n">shaft_loc</span><span class="p">:</span>
    <span class="n">shft_lattice</span><span class="p">[</span><span class="n">sh_loc</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">sh_loc</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">2</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="n">shft_voxels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">shft_lattice</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">vox</span> <span class="ow">in</span> <span class="n">shft_voxels</span><span class="p">:</span>
    <span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="n">VZ</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">vox</span><span class="p">)</span>
    <span class="n">shft_lattice</span><span class="p">[</span><span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="p">:</span><span class="n">VZ</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">vox</span> <span class="ow">in</span> <span class="n">shft_voxels</span><span class="p">:</span>
    <span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="n">VZ</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">vox</span><span class="p">)</span>
    <span class="n">shft_lattice</span><span class="p">[</span><span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="n">VZ</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">VZ</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2-creation-of-horizontal-corridors">2. Creation of Horizontal Corridors</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="21-extract-the-connectivity-graph-from-the-lattice-based-on-the-horizontal-stencil">2.1. Extract the connectivity graph from the lattice based on the horizontal stencil</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># find the number of all voxels</span>
<span class="n">vox_count</span> <span class="o">=</span> <span class="n">avail_lattice</span><span class="o">.</span><span class="n">size</span> 

<span class="c1"># initialize the adjacency matrix</span>
<span class="n">adj_mtrx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">vox_count</span><span class="p">,</span><span class="n">vox_count</span><span class="p">))</span>

<span class="c1"># Finding the index of the available voxels in avail_lattice</span>
<span class="n">avail_index</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">avail_lattice</span> <span class="o">==</span> <span class="mi">1</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>

<span class="c1"># fill the adjacency matrix using the list of all neighbours</span>
<span class="k">for</span> <span class="n">vox_loc</span> <span class="ow">in</span> <span class="n">avail_index</span><span class="p">:</span>
    <span class="c1"># find the 1D id</span>
    <span class="n">vox_id</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">vox_loc</span><span class="p">,</span> <span class="n">avail_lattice</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
    <span class="c1"># retrieve the list of neighbours of the voxel based on the stencil</span>
    <span class="n">vox_neighs</span> <span class="o">=</span> <span class="n">avail_lattice</span><span class="o">.</span><span class="n">find_neighbours_masked</span><span class="p">(</span><span class="n">stencil</span><span class="p">,</span> <span class="n">loc</span> <span class="o">=</span> <span class="n">vox_loc</span><span class="p">)</span>
    <span class="c1"># iterating over the neighbours</span>
    <span class="k">for</span> <span class="n">neigh</span> <span class="ow">in</span> <span class="n">vox_neighs</span><span class="p">:</span>
        <span class="c1"># setting the entry to one</span>
        <span class="n">adj_mtrx</span><span class="p">[</span><span class="n">vox_id</span><span class="p">,</span> <span class="n">neigh</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>

<span class="c1"># construct the graph </span>
<span class="n">g</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">from_numpy_array</span><span class="p">(</span><span class="n">adj_mtrx</span><span class="p">)</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="22-find-the-shortest-path-and-construct-the-corridor">2.2. Find the shortest path and construct the corridor</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># initialize corridor lattice</span>
<span class="n">cor_lattice</span> <span class="o">=</span> <span class="n">shft_lattice</span> <span class="o">*</span> <span class="mi">0</span>
<span class="n">cor_flat</span> <span class="o">=</span> <span class="n">cor_lattice</span><span class="o">.</span><span class="n">flatten</span><span class="p">()</span>
<span class="n">all_cors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c1"># for each voxel that needs to have access to shafts</span>
<span class="k">for</span> <span class="n">a_vox</span> <span class="ow">in</span> <span class="n">occ_ind</span><span class="p">:</span>

    <span class="c1"># slice the corridor lattice horizontally</span>
    <span class="n">cor_floor</span> <span class="o">=</span> <span class="n">shft_lattice</span><span class="p">[:,:,</span><span class="n">a_vox</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
    <span class="c1"># find the vertical shaft voxel indices</span>
    <span class="n">shaft_vox_inds</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">cor_floor</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">))</span><span class="o">.</span><span class="n">T</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">path_lens</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">shft_ind</span> <span class="ow">in</span> <span class="n">shaft_vox_inds</span><span class="p">:</span>
        <span class="c1"># construct the destination address</span>
        <span class="n">dst_vox</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">shft_ind</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">shft_ind</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">a_vox</span><span class="p">[</span><span class="mi">2</span><span class="p">]])</span>
        <span class="c1"># construct 1-dimensional indices</span>
        <span class="n">src_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">a_vox</span><span class="p">,</span> <span class="n">shft_lattice</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">dst_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ravel_multi_index</span><span class="p">(</span><span class="n">dst_vox</span><span class="p">,</span> <span class="n">shft_lattice</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>

        <span class="c1"># find the shortest path</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">path</span> <span class="o">=</span> <span class="n">nx</span><span class="o">.</span><span class="n">algorithms</span><span class="o">.</span><span class="n">shortest_paths</span><span class="o">.</span><span class="n">astar</span><span class="o">.</span><span class="n">astar_path</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">src_ind</span><span class="p">,</span> <span class="n">dst_ind</span><span class="p">)</span>
            <span class="n">paths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
            <span class="n">path_lens</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">pass</span>


    <span class="c1"># find the shortest path</span>
    <span class="n">shortest_path</span> <span class="o">=</span> <span class="n">paths</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">path_lens</span><span class="p">)</span><span class="o">.</span><span class="n">argmin</span><span class="p">()]</span>
    <span class="n">all_cors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">shortest_path</span><span class="p">)</span>
    <span class="c1"># set the shortest path occupied in the </span>
    <span class="n">cor_flat</span><span class="p">[</span><span class="n">shortest_path</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

<span class="c1"># reshape the flat lattice</span>
<span class="n">cor_lattice</span> <span class="o">=</span> <span class="n">cor_flat</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">cor_lattice</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="3editing-voxels">3.Editing Voxels</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="31-corridor">3.1 Corridor</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">all_cors</span><span class="p">:</span>
    <span class="c1"># for each voxel in the corridor ...</span>
    <span class="k">for</span> <span class="n">vox_1d_ind</span> <span class="ow">in</span> <span class="n">path</span><span class="p">:</span>
        <span class="c1"># find the 3-dimensional index of the voxel</span>
        <span class="n">vox_3d_ind</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unravel_index</span><span class="p">(</span><span class="n">vox_1d_ind</span><span class="p">,</span> <span class="n">cor_lattice</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
        <span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="n">VZ</span> <span class="o">=</span> <span class="n">vox_3d_ind</span>
        <span class="c1"># mark the voxel as unavailable</span>
        <span class="c1">#init_avail_lattice[VX, VY, VZ] = 0</span>
        <span class="c1"># mark two voxels horizontal the voxel avilable</span>
        <span class="n">cor_lattice</span><span class="p">[</span><span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="n">VZ</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">cor_lattice</span><span class="p">[</span><span class="n">VX</span><span class="p">:</span><span class="n">VX</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="n">VY</span><span class="p">:</span><span class="n">VY</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="n">VZ</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="n">init_avail_lattice</span><span class="p">[</span><span class="n">VX</span><span class="p">:</span><span class="n">VX</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="n">VY</span><span class="p">:</span><span class="n">VY</span><span class="o">+</span><span class="mi">3</span><span class="p">,</span> <span class="n">VZ</span><span class="p">:]</span> <span class="o">=</span> <span class="mi">0</span>        
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="32-shaft">3.2 Shaft</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="n">shft_voxels</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argwhere</span><span class="p">(</span><span class="n">shft_lattice</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>

<span class="k">for</span> <span class="n">vox</span> <span class="ow">in</span> <span class="n">shft_voxels</span><span class="p">:</span>
    <span class="n">VX</span><span class="p">,</span> <span class="n">VY</span><span class="p">,</span> <span class="n">VZ</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">vox</span><span class="p">)</span>
    <span class="n">shft_lattice</span><span class="p">[</span><span class="n">VX</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">VX</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="n">VY</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="n">VY</span><span class="o">+</span><span class="mi">2</span><span class="p">,</span> <span class="p">:</span><span class="n">VZ</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="33-visualize-the-corridor-lattice">3.3. Visualize the corridor lattice</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="n">context_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="s2">&quot;../data/extended_context.obj&quot;</span><span class="p">)</span>
<span class="c1"># load the mesh from file</span>
<span class="n">context_mesh</span> <span class="o">=</span> <span class="n">tm</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">context_path</span><span class="p">)</span>

<span class="n">p</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">Plotter</span><span class="p">(</span><span class="n">notebook</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="c1"># convert mesh to pv_mesh</span>
<span class="k">def</span> <span class="nf">tri_to_pv</span><span class="p">(</span><span class="n">tri_mesh</span><span class="p">):</span>
    <span class="n">faces</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">pad</span><span class="p">(</span><span class="n">tri_mesh</span><span class="o">.</span><span class="n">faces</span><span class="p">,</span> <span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span> <span class="s1">&#39;constant&#39;</span><span class="p">,</span> <span class="n">constant_values</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
    <span class="n">pv_mesh</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">PolyData</span><span class="p">(</span><span class="n">tri_mesh</span><span class="o">.</span><span class="n">vertices</span><span class="p">,</span> <span class="n">faces</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">pv_mesh</span>

<span class="n">base_lattice</span> <span class="o">=</span> <span class="n">cor_lattice</span> 

<span class="c1"># Set the grid dimensions: shape + 1 because we want to inject our values on the CELL data</span>
<span class="n">grid</span> <span class="o">=</span> <span class="n">pv</span><span class="o">.</span><span class="n">UniformGrid</span><span class="p">()</span>
<span class="n">grid</span><span class="o">.</span><span class="n">dimensions</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">base_lattice</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
<span class="c1"># The bottom left corner of the data set</span>
<span class="n">grid</span><span class="o">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">base_lattice</span><span class="o">.</span><span class="n">minbound</span> <span class="o">-</span> <span class="n">base_lattice</span><span class="o">.</span><span class="n">unit</span> <span class="o">*</span> <span class="mf">0.5</span>
<span class="c1"># These are the cell sizes along each axis</span>
<span class="n">grid</span><span class="o">.</span><span class="n">spacing</span> <span class="o">=</span> <span class="n">base_lattice</span><span class="o">.</span><span class="n">unit</span> 

<span class="c1"># adding the meshes</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">tri_to_pv</span><span class="p">(</span><span class="n">context_mesh</span><span class="p">),</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="s1">&#39;surface&#39;</span><span class="p">)</span>


<span class="c1"># adding the boundingbox wireframe</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">outline</span><span class="p">(),</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;grey&quot;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;Domain&quot;</span><span class="p">)</span>

<span class="c1"># adding the avilability lattice</span>
<span class="n">init_avail_lattice</span><span class="o">.</span><span class="n">fast_vis</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>

<span class="c1"># # adding axes</span>
<span class="c1"># p.add_axes()</span>
<span class="c1"># p.show_bounds(grid=&quot;back&quot;, location=&quot;back&quot;, color=&quot;#aaaaaa&quot;)</span>


<span class="c1"># Add the data values to the cell data</span>
<span class="n">grid</span><span class="o">.</span><span class="n">cell_arrays</span><span class="p">[</span><span class="s2">&quot;Agents&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">base_lattice</span><span class="o">.</span><span class="n">flatten</span><span class="p">(</span><span class="n">order</span><span class="o">=</span><span class="s2">&quot;F&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">int</span><span class="p">)</span>  <span class="c1"># Flatten the array!</span>
<span class="c1"># filtering the voxels</span>
<span class="n">threshed</span> <span class="o">=</span> <span class="n">grid</span><span class="o">.</span><span class="n">threshold</span><span class="p">([</span><span class="mf">0.9</span><span class="p">,</span> <span class="mf">2.1</span><span class="p">])</span>
<span class="c1"># adding the voxels</span>
<span class="n">p</span><span class="o">.</span><span class="n">add_mesh</span><span class="p">(</span><span class="n">threshed</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;sphere&#39;</span><span class="p">,</span> <span class="n">show_edges</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">show_scalar_bar</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>


<span class="c1"># p.add_slider_widget(create_mesh, [0, n_frames], title=&#39;Time&#39;, value=0, event_type=&quot;always&quot;, style=&quot;classic&quot;, pointa=(0.1, 0.1), pointb=(0.9, 0.1))</span>
<span class="n">p</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">use_ipyvtk</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>



</div>
<div class="output_wrapper">
<div class="output">
<div class="output_area">
<div id="27592db5-bde3-467f-9b1f-5f4f668212cb"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#27592db5-bde3-467f-9b1f-5f4f668212cb');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "37a3afc131474290ad4b664c0c3f69b4", "version_major": 2, "version_minor": 0}
</script>
</div>
</div>
<div class="output_area">
<div class="output_text output_subarea output_execute_result">
<pre>
<code>[(1437.5557019624885, 1436.3451154624884, 1448.4847311363303),
 (18.23971549999999, 17.02912900000001, 29.168744673841857),
 (0.0, 0.0, 1.0)]</code>
</pre>
</div>
</div>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="4-saving">4. Saving</h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="c1"># save the sun access latice to csv</span>

<span class="n">csv_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">relpath</span><span class="p">(</span><span class="s1">&#39;../data/atrium_3.6.csv&#39;</span><span class="p">)</span>
<span class="n">shft_lattice</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">csv_path</span><span class="p">)</span>
</code></pre></div>



</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="credits">Credits</h3>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">


<div class="codehilite"><pre><span></span><code><span class="n">__author__</span> <span class="o">=</span> <span class="s2">&quot;Shervin Azadi and Pirouz Nourian&quot;</span>
<span class="n">__changes_made_by__</span><span class="p">:</span> <span class="s2">&quot;Frank Vahstal&quot;</span>
<span class="n">__license__</span> <span class="o">=</span> <span class="s2">&quot;MIT&quot;</span>
<span class="n">__version__</span> <span class="o">=</span> <span class="s2">&quot;1.0&quot;</span>
<span class="n">__url__</span> <span class="o">=</span> <span class="s2">&quot;https://github.com/shervinazadi/spatial_computing_workshops&quot;</span>
<span class="n">__summary__</span> <span class="o">=</span> <span class="s2">&quot;Spatial Computing Design Studio Workshop on Path Finding and Corridorfor Generative Spatial Relations&quot;</span>
</code></pre></div>



</div>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../Voxelize/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Voxelization
              </div>
            </div>
          </a>
        
        
          <a href="../shadow/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Shadow casting analysis
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.7e0ee788.min.js"></script>
      <script src="../../../assets/javascripts/bundle.b3a72adc.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>